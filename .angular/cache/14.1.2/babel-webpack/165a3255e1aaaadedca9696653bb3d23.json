{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/cliente.service\";\nimport * as i2 from \"../service/saidaMalha.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction MalhaComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_0_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.abrirModal());\n    });\n    i0.ɵɵelementStart(1, \"div\", 4)(2, \"h1\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 5)(7, \"span\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.malha.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.getPreco(ctx_r0.malha.valor));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.malha.descricao);\n  }\n}\n\nfunction MalhaComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_1_Template_div_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.abrirModal());\n    });\n    i0.ɵɵelementStart(1, \"ul\", 8)(2, \"li\", 9);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"li\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"li\", 9);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.malha.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getPreco(ctx_r1.malha.valor));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.malha.descricao);\n  }\n}\n\nfunction MalhaComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"div\", 11)(2, \"h2\", 12);\n    i0.ɵɵtext(3, \"Sa\\u00EDda de Malhas\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"img\", 13);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_2_Template_img_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.fechaModal());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 14)(6, \"div\", 15)(7, \"label\", 16);\n    i0.ɵɵtext(8, \"Peso Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 17);\n    i0.ɵɵlistener(\"ngModelChange\", function MalhaComponent_div_2_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.pesoTotal = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 15)(11, \"label\", 18);\n    i0.ɵɵtext(12, \"Qualidade da Malha:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"textarea\", 19);\n    i0.ɵɵlistener(\"ngModelChange\", function MalhaComponent_div_2_Template_textarea_ngModelChange_13_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.qualidade = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 15)(15, \"label\", 20);\n    i0.ɵɵtext(16, \"CNPJ do Cliente:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"input\", 21);\n    i0.ɵɵlistener(\"ngModelChange\", function MalhaComponent_div_2_Template_input_ngModelChange_17_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.cliente = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 15)(19, \"label\", 22);\n    i0.ɵɵtext(20, \"Nota Fiscal:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"input\", 23);\n    i0.ɵɵlistener(\"ngModelChange\", function MalhaComponent_div_2_Template_input_ngModelChange_21_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.nota = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 24)(23, \"img\", 25);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_2_Template_img_click_23_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.modificaQtd(1));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\", 26);\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"img\", 27);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_2_Template_img_click_26_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.modificaQtd(2));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 28)(28, \"img\", 29);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_2_Template_img_click_28_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.adicionaSacola());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function MalhaComponent_div_2_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.vender());\n    });\n    i0.ɵɵtext(30, \"Finalizar Venda\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.pesoTotal);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.qualidade);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.cliente);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.nota);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.quantidade);\n  }\n}\n\nexport let MalhaComponent = /*#__PURE__*/(() => {\n  class MalhaComponent {\n    constructor(clienteService, malhaService) {\n      this.clienteService = clienteService;\n      this.malhaService = malhaService;\n      this.malha = {\n        id: \"0\",\n        descricao: \"\",\n        valor: 0\n      };\n      this.tipo_exibicao_bloco = true;\n      this.modalVenda = false;\n      this.pesoTotal = 0;\n      this.qualidade = \"\";\n      this.cliente = \"\";\n      this.nota = \"\";\n      this.quantidade = 1;\n      this.sacola = [{\n        id: \"0\",\n        descricao: \"a\",\n        valor: 3\n      }];\n    }\n\n    ngOnInit() {}\n\n    abrirModal() {\n      this.modalVenda = true;\n    }\n\n    fechaModal() {\n      this.modalVenda = false;\n    }\n\n    modificaQtd(opcao) {\n      if (opcao == 1) {\n        if (this.quantidade > 1) {\n          this.quantidade--;\n        }\n      } else {\n        this.quantidade++;\n      }\n    }\n\n    vender() {\n      if (this.cliente == \"\") {\n        alert(\"Preencha o Cliente!\");\n      } else if (this.nota == \"\") {\n        alert(\"Preencha a nota fiscal!\");\n      } else {\n        let clienteID = \"\";\n\n        try {\n          this.clienteService.buscarClientes().subscribe(e => {\n            let listaClientes = Object.values(e);\n            console.log(listaClientes);\n\n            for (const cliente of listaClientes) {\n              if (cliente.cnpj == this.cliente) {\n                clienteID = cliente.id;\n              }\n            }\n\n            if (!clienteID) {\n              alert(\"Cliente Inválido!\");\n              return;\n            }\n\n            try {\n              this.malhaService.cadastrarSaidaMalha({\n                qtd_rolos: this.quantidade,\n                peso_total: this.pesoTotal,\n                qualidade_malha: this.qualidade,\n                valor_saida: this.quantidade * this.malha.valor,\n                cliente_codigo: clienteID,\n                nota_fiscal_codigo: this.nota,\n                malha_codigo: this.malha.id\n              });\n            } catch (erro) {\n              alert(\"Erro interno no Sistema!\");\n              return;\n            }\n\n            this.modalVenda = false;\n            alert(\"Venda Efetuada com Sucesso!\");\n          });\n        } catch (erro) {\n          alert(\"Erro interno no Sistema!\");\n        }\n      }\n    }\n\n    getPreco(valor) {\n      return valor.toLocaleString('pt-br', {\n        style: 'currency',\n        currency: 'BRL'\n      });\n    }\n\n    adicionaSacola() {\n      this.modalVenda = false;\n      this.sacola = JSON.parse(localStorage.getItem('carrinho')) || [];\n      let malhaNova = {\n        id: this.malha.id,\n        descricao: this.malha.descricao,\n        valor: this.malha.valor,\n        quantidade: this.quantidade\n      };\n      this.sacola.push(malhaNova);\n      localStorage.setItem('carrinho', JSON.stringify(this.sacola));\n    }\n\n  }\n\n  MalhaComponent.ɵfac = function MalhaComponent_Factory(t) {\n    return new (t || MalhaComponent)(i0.ɵɵdirectiveInject(i1.ClienteService), i0.ɵɵdirectiveInject(i2.SaidaMalhaService));\n  };\n\n  MalhaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MalhaComponent,\n    selectors: [[\"app-malha\"]],\n    inputs: {\n      malha: \"malha\",\n      tipo_exibicao_bloco: \"tipo_exibicao_bloco\"\n    },\n    decls: 3,\n    vars: 3,\n    consts: [[\"class\", \"item\", \"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"\", \"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"modalVenda\", 4, \"ngIf\"], [1, \"item\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"container-top-item\"], [1, \"container-bottom-item\"], [1, \"spanDescricao\"], [1, \"\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"nav\", \"p-3\", 2, \"border-left\", \"10px solid #12474E\", \"background-color\", \"#F9F9F9\", \"box-shadow\", \"1.5px 1.5px 5px 1px #000000\"], [1, \"me-3\"], [1, \"modalVenda\"], [2, \"display\", \"flex\", \"width\", \"100%\", \"justify-content\", \"space-evenly\", \"align-items\", \"center\"], [1, \"tituloVenda\"], [\"src\", \"../../assets/close.png\", 1, \"fechar\", 3, \"click\"], [1, \"modalPrincipal\"], [1, \"divInput\"], [\"for\", \"pesoTotal\", 1, \"labelInput\"], [\"type\", \"text\", \"id\", \"pesoTotal\", 1, \"inputModal\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"qualidade\", 1, \"labelInput\"], [\"type\", \"text\", \"id\", \"qualidade\", 1, \"inputModal\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"cliente\", 1, \"labelInput\"], [\"type\", \"text\", \"id\", \"cliente\", 1, \"inputModal\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"nota\", 1, \"labelInput\"], [\"type\", \"text\", \"id\", \"nota\", 1, \"inputModal\", 3, \"ngModel\", \"ngModelChange\"], [1, \"aumentarDiminuir\"], [\"src\", \"../../assets/menos.png\", 1, \"botaoDiminuir\", 3, \"click\"], [1, \"spanQtd\"], [\"src\", \"../../assets/mais.png\", 1, \"botaoDiminuir\", 3, \"click\"], [1, \"botaoSacola\"], [\"src\", \"../../assets/sacolaPreta.png\", 1, \"sacola\", 3, \"click\"], [1, \"botaoVenda\", 3, \"click\"]],\n    template: function MalhaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MalhaComponent_div_0_Template, 9, 3, \"div\", 0);\n        i0.ɵɵtemplate(1, MalhaComponent_div_1_Template, 8, 3, \"div\", 1);\n        i0.ɵɵtemplate(2, MalhaComponent_div_2_Template, 31, 5, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.tipo_exibicao_bloco);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.tipo_exibicao_bloco);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.modalVenda);\n      }\n    },\n    dependencies: [i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\"*[_ngcontent-%COMP%]{margin:0;padding:0}.item[_ngcontent-%COMP%]{width:100%;height:140px;background-color:#f9f9f9;box-shadow:1.5px 1.5px 5px 1px #000;border-left:10px solid #12474E;border-radius:5px;overflow:hidden}.item[_ngcontent-%COMP%]:hover{cursor:pointer}.container-top-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container-top-item[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{font-size:17px;font-family:Trebuchet MS,Lucida Sans Unicode,Lucida Grande,Lucida Sans,Arial,sans-serif;font-weight:700;margin:1rem 1rem 0}.container-bottom-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.aumentarDiminuir[_ngcontent-%COMP%]{width:35%;height:35px;display:flex}.botaoDiminuir[_ngcontent-%COMP%]{width:30%;border:1px solid black;height:100%;font-size:26px;text-align:center;padding:5px}.botaoDiminuir[_ngcontent-%COMP%]:hover{cursor:pointer}.spanQtd[_ngcontent-%COMP%]{border:1px solid black;height:100%;width:40%;font-size:18px;text-align:center}.modalVenda[_ngcontent-%COMP%]{width:30%;height:65%;background-color:#fff;border:1px solid #12474E;border-top:15px solid #12474E;border-radius:10px;position:absolute;top:20%;left:37%;padding:15px}.tituloVenda[_ngcontent-%COMP%]{color:#12474e;text-align:center;width:80%}.fechar[_ngcontent-%COMP%]{width:20px;height:20px}.fechar[_ngcontent-%COMP%]:hover{cursor:pointer}.modalPrincipal[_ngcontent-%COMP%]{padding:30px 10px 10px;width:100%}.divInput[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:10px}.labelInput[_ngcontent-%COMP%]{color:#12474e;font-size:18px;font-weight:700;margin-bottom:5px}.inputModal[_ngcontent-%COMP%]{padding:0 10px}#pesoTotal[_ngcontent-%COMP%]{width:20%}#qualidade[_ngcontent-%COMP%]{resize:none}.botaoVenda[_ngcontent-%COMP%]{padding:10px;background-color:#12474e;color:#fff;font-weight:700;border:1px solid black;float:right;margin-left:25px}.botaoSacola[_ngcontent-%COMP%]{float:right;display:flex;height:50px}.sacola[_ngcontent-%COMP%]:hover{cursor:pointer}h1[_ngcontent-%COMP%]{overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;white-space:nowrap}.spanDescricao[_ngcontent-%COMP%]{overflow-wrap:break-word}\"]\n  });\n  return MalhaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}